<div
  class="dashboard-container"
  role="region"
  aria-label="Live Weather Updates"
  aria-live="polite"
>
  <div class="controls">
    <fieldset>
      <legend>Enter a city or region name</legend>
      <input
        type="text"
        [formControl]="cityControl"
        placeholder="e.g., Bangalore"
        aria-label="City name"
        autocomplete="off"
      />
    </fieldset>

    <fieldset class="unit-toggle">
      <legend>Temperature Unit</legend>
      <label for="unitC">
        <input
          type="radio"
          id="unitC"
          name="unit"
          (change)="setUnit('metric')"
          [checked]="unit === 'metric'"
        />
        °C
      </label>
      <label for="unitF">
        <input
          type="radio"
          id="unitF"
          name="unit"
          (change)="setUnit('imperial')"
          [checked]="unit === 'imperial'"
        />
        °F
      </label>
    </fieldset>
  </div>

  <!-- Weather Display -->
  <section *ngIf="weatherState$ | async as state">
    <!-- Loading -->
    <p *ngIf="state.status === 'loading'">Loading weather data...</p>

    <!-- Error -->
    <p *ngIf="isError(state)" class="error-message">{{ state.error }}</p>

    <!-- Success -->
    <section *ngIf="isSuccess(state)" class="weather-card">
      <h1>Weather in {{ state.data.name }}</h1>

      <img
        [src]="'https://openweathermap.org/img/wn/' + state.data.weather[0].icon + '@2x.png'"
        [alt]="state.data.weather[0].description"
        width="100"
        height="100"
      />

      <p>
        <strong>Temperature:</strong>
        {{ state.data.main.temp }}°{{ unit === 'metric' ? 'C' : 'F' }}
      </p>
      <p><strong>Humidity:</strong> {{ state.data.main.humidity }}%</p>
      <p>
        <strong>Wind Speed:</strong>
        {{ state.data.wind.speed }} {{ unit === 'metric' ? 'm/s' : 'mph' }}
      </p>
      <p><strong>Condition:</strong> {{ state.data.weather[0].description }}</p>
    </section>
  </section>
</div>
